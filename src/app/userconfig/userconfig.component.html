<app-layout-default>
    <div class="d-flex flex-row row-home">
        <div class="flex-fill">
            <div class="row g-3">
                <form [formGroup]="userForm" #formUser="ngForm" (ngSubmit)="salvarInfo()">
                    <mat-card class="mat-elevation-z4">
                        <mat-card-title>
                            Informação Pessoal
                        </mat-card-title>
                        <mat-card-subtitle>Preencha aqui suas informações pessoais e salve ao clicar no botão Salvar, caso tenha alguma modificação.
                            Clique em resetar para voltar para configuração salva.</mat-card-subtitle>
                        <mat-card-content>
                            <div class="row">
                                <div class="col-12">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Nome</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput formControlName="nome" name="nome">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline">
                                        <mat-label>Email</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">email</mat-icon>
                                        <input matInput formControlName="email" name="email">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline">
                                        <mat-label>Login</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">assignment_ind</mat-icon>
                                        <input matInput formControlName="login" name="login">
                                        <mat-error>Login inválido ou já em uso</mat-error>
                                    </mat-form-field>
                                    <mat-form-field appearance="outline">
                                        <mat-label>Senha</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">vpn_key</mat-icon>
                                        <input matInput type="password" formControlName="senha" name="senha"
                                        (focus)="resetSenha(true)" (focusout)="resetSenha(false)">
                                        <mat-error>Senha deve ser maior que 8 caracteres</mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <button mat-button color="primary" class="botao_amarelo" type="submit"
                            [disabled]="formUser.invalid">Salvar</button>
                            <button type="button" mat-button style="margin-left: 10px" (click)="setInfosOriginal()">Resetar</button>
                        </mat-card-content>
                    </mat-card>
                </form>
                <form [formGroup]="formAddress" #formAddressNgForm="ngForm" (ngSubmit)="salvarEndereco()">
                    <mat-card class="mat-elevation-z4">
                        <mat-card-title>
                            Endereço
                        </mat-card-title>
                        <mat-card-subtitle>Preencha aqui suas informações de endereço opcionais.</mat-card-subtitle>
                        <mat-card-content>
                            <div class="row">
                                <div class="col-4">
                                    <mat-form-field appearance="outline">
                                        <mat-label>CEP</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput (focusout)="pesquisarCEP()"
                                        formControlName="cep" name="cep" angularFormsMask="DDDDD-DDD">
                                    </mat-form-field>
                                </div>
                                <div class="col-8">
                                    <mat-form-field appearance="outline"> 
                                        <mat-label>Rua</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput formControlName="rua" name="rua">
                                    </mat-form-field>
                                </div>
                                <div class="col-8">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Bairro</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput formControlName="bairro" name="bairro">
                                    </mat-form-field>
                                </div>
                                <div class="col-4">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Número</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput formControlName="numero" name="numero">
                                    </mat-form-field>
                                </div>
                                <div class="col-12">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Complemento</mat-label>
                                        <mat-icon matPrefix style="margin-right: 5px">person</mat-icon>
                                        <input matInput formControlName="complemento" name="complemento">
                                    </mat-form-field>
                                </div>
                            </div>
                            <button mat-button color="primary" class="botao_amarelo" type="submit">Salvar</button>
                            <button mat-button type="button" style="margin-left: 10px" (click)="resetEndereco()">Resetar</button>
                        </mat-card-content>
                    </mat-card>
                </form>
                <form>
                    <mat-card class="mat-elevation-z4 mb-3">
                        <mat-card-title>
                           Excluir cadastro 
                        </mat-card-title>
                        <mat-card-subtitle>
                            Caso você deseja excluir seu cadastro, 
                            basta clicar no botão abaixo, mas atenção, essa ação é irreversível
                        </mat-card-subtitle>
                        <mat-card-content>
                            <button mat-raised-button color="warn" type="button"
                            (click)="excluirCadastro()">Excluir cadastro</button>
                        </mat-card-content>
                    </mat-card>
                </form>
            </div>
        </div>
    </div>
</app-layout-default>